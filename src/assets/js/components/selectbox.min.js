document.addEventListener("DOMContentLoaded", (e) => {
  function t(e, t) {
    return (` ${e.className} `).indexOf(` ${t} `) > -1;
  }
  window.onclick = function () {
    for (
      let e = document.getElementsByClassName("selectbox-options"), t = 0;
      t < e.length;
      t++
    ) { e[t].setAttribute("class", "selectbox-options selectbox-options--hidden"); }
  };
  for (
    let s = document.getElementsByClassName("justselect"), n = 0;
    n < s.length;
    n++
  ) {
    (s[n].required = !0),
    (s[n].onchange = function () {
      const e = document.getElementsByClassName("selectbox__label");
      const t = this.value;
      const s = this.dataset.sid;
      const n = this.options;
      for (a = 0; a < e.length; a++) {
        if (e[a].parentElement.dataset.pair === s) {
          for (b = 0; b < n.length; b++) {
            if (n[b].value == t) {
              e[a].innerHTML = n[b].innerHTML;
              break;
            }
          }
          break;
        }
      }
    });
    const o = s[n].options;
    const l = document.createElement("div");
    l.setAttribute("class", "selectbox"),
    l.setAttribute("data-pair", `select-${n + 1}`);
    const i = document.createElement("div");
    i.setAttribute("class", "selectbox__label"), l.appendChild(i);
    const c = document.createElement("div");
    c.setAttribute("class", "selectbox-options selectbox-options--hidden");
    for (let r = 0; r < o.length; r++) {
      const d = document.createElement("div");
      d.setAttribute("class", "selectbox__option"),
      d.setAttribute("data-value", o[r].value),
      !0 === o[r].selected
          && (d.setAttribute(
            "class",
            `${d.className} selectbox__option--selected`,
          ),
          (i.innerHTML = o[r].text)),
      o[r].disabled
          || ((d.innerHTML = o[r].text), c.appendChild(d), l.appendChild(c));
    }
    !(function (e, t) {
      e.parentNode.insertBefore(t, e.nextSibling);
    }(s[n], l)),
    s[n].setAttribute("data-sid", `select-${n + 1}`),
    (s[n].style.display = "none");
  }
  for (
    let u = document.getElementsByClassName("justselect"), p = 0;
    p < u.length;
    p++
  ) {
    const m = document.createElement("div");
    m.setAttribute("class", "justwrap");
    const h = document.getElementsByClassName("selectbox");
    u[p].parentElement.insertBefore(m, u[p]),
    h[p].parentElement.insertBefore(m, h[p]),
    m.appendChild(u[p]),
    m.appendChild(h[p]);
  }
  for (
    let v = document.getElementsByClassName("selectbox__label"), x = 0;
    x < v.length;
    x++
  ) {
    v[x].onclick = function (e) {
      e.stopPropagation();
      const s = this;
      const n = this.nextSibling;
      const o = n.children;
      t(n, "selectbox-options--hidden")
        ? n.setAttribute("class", "selectbox-options")
        : n.setAttribute(
          "class",
          "selectbox-options selectbox-options--hidden",
        );
      for (var a = 0; a < o.length; a++) {
        o[a].onclick = function () {
          for (let e = 0; e < o.length; e++) { e != a && o[e].setAttribute("class", "selectbox__option"); }
          (s.innerHTML = this.innerHTML),
          this.setAttribute(
            "class",
            "selectbox__option selectbox__option--selected",
          ),
          (document.querySelectorAll(
            `[data-sid="${s.parentElement.dataset.pair}"]`,
          )[0].value = this.dataset.value),
          n.setAttribute(
            "class",
            "selectbox-options selectbox-options--hidden",
          );
        };
      }
    };
  }
});
